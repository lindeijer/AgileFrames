package net.agileframes.traces.ticket;
import net.agileframes.core.traces.Ticket;
import java.rmi.server.UnicastRemoteObject;

public class PTR implements PrimeTicketRemote {
  private PrimeTicket pt = null;
  public PTR(PrimeTicket pt) {
    System.out.println("###### PTR was created !! ");
    this.pt = pt;
    try { UnicastRemoteObject.exportObject(this); }
    catch (Exception e) { e.printStackTrace();  }
  }
  // setAssigned is called by setAssigned() in the serialized version of PrimeTicket. The call to this
  // method is forwarded to the server. At the server this method calls the original version of
  // PrimeTicket with setAssignedByPTR()
  public synchronized void setAssigned(Ticket t,int i) throws java.rmi.RemoteException {
    System.out.println("PTR: setAssigned called, tostring = "+ toString()+" pt = "+pt.toString());  
    pt.setAssignedByPTR(t, i);
  }
}
