package net.agileframes.forces.flags;

import net.agileframes.core.forces.Flag;
import net.agileframes.core.forces.Manoeuvre;

public class TimingFlag extends Flag {
  private long completionTime;
  private double deceleration;
  public TimingFlag(Manoeuvre manoeuvre, long completionTime, double deceleration) {
    this.completionTime = completionTime;
    this.deceleration = deceleration;
    this.manoeuvre = manoeuvre;
  }
  public void evaluate() {// wrong calculation of timeToEnd!!
    long timeToEnd = (long)(1000 * (manoeuvre.getCalcSpeed() / deceleration));
    if (timeToEnd >= completionTime) { raise(); }
  }
  protected void copyAllFields(Flag flag) {
    this.completionTime = ((TimingFlag)flag).completionTime;
    this.deceleration = ((TimingFlag)flag).deceleration;
  }

}

