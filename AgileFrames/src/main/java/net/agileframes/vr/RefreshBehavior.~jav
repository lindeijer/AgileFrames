package net.agileframes.vr;

import net.agileframes.core.vr.Avatar;
import javax.media.j3d.Behavior;
import javax.media.j3d.WakeupCriterion;
import javax.media.j3d.WakeupOnElapsedFrames;
import java.util.Enumeration;

/**
  RefreshBehavior is a behavior class that is used to update the state of an avatar.
  Every time it is triggered it invokes avatar.refresh()

  @author van Dijk, Lindeijer, Evers
  @version 0.0.1
*/

public class RefreshBehavior extends Behavior {
  private WakeupOnElapsedFrames wakeup;
  private Avatar avatar;
  private int frames;


  /**
   * Constructor - creates a new RefreshBehavior
   * @param avatar the avatar that this behavior is to be associated with
   * @param frames the number of frames between each 'trigger'
   */
  public RefreshBehavior(Avatar avatar, int frames) {
    this.avatar = avatar;
    this.wakeup = new WakeupOnElapsedFrames(frames);
    this.frames = frames;
  }

  public void initialize() {
    wakeupOn(this.wakeup);
  }

  public void processStimulus( Enumeration criteria ) {
    this.avatar.refresh();
    wakeupOn(this.wakeup);
  }
}


